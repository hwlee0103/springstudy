var __COMMON = com.example.springstudy.common;

//--------------------------------------------------------------------------------------------------------------------------------------------------------
//전역 변수
//--------------------------------------------------------------------------------------------------------------------------------------------------------
var __STATIC_VALUE = "";

//--------------------------------------------------------------------------------------------------------------------------------------------------------
//시작 부분
//--------------------------------------------------------------------------------------------------------------------------------------------------------
var init = function(){
    main.init();
};

//--------------------------------------------------------------------------------------------------------------------------------------------------------
//메인 함수 정의 부분
//--------------------------------------------------------------------------------------------------------------------------------------------------------
var main = (function() {
    return {
        //---------------------------------------------------------------------------------------------------------
        // 초기 이벤트 바인딩
        //---------------------------------------------------------------------------------------------------------
        init : function(){
           // TODO sample
		   bind.dataBind();
        }
    }
}());

//--------------------------------------------------------------------------------------------------------------------------------------------------------
//바인딩 함수 정의 부분
//--------------------------------------------------------------------------------------------------------------------------------------------------------
var bind = (function() {
    return {
        //---------------------------------------------------------------------------------------------------------
        // sample 이벤트 바인딩
        //---------------------------------------------------------------------------------------------------------
        eventBind : function(){
			// TODO sample 이벤트 바인딩
            event.clickAddName();
        },
        
        //---------------------------------------------------------------------------------------------------------
        // sample 데이터 바인딩
        //---------------------------------------------------------------------------------------------------------
        dataBind : function(){
			var _params = {};
		   
            __COMMON.ajax.ajaxLoad("/memo/listdata", _params, function (p_data) {
				// response 데이터
				// var _result = p_data.result;
                var _result = p_data;
				// response total count
                // var _totalCount = __COMMON.utils.isNull(p_data.totalCount, "number");
				
				var _html = [];
                // sample null 체크
				if(p_data != null){
                    for(var rowNum in _result){
						var _obj = _result[rowNum];
						var _memoSeq = "<td>" + __COMMON.utils.isNull(_obj.memoSeq, "string") + "</td>";
						var _memoTitle = "<td class='memoTitle' id='" + _obj.memoSeq + "'>" + __COMMON.utils.isNull(_obj.memoTitle, "string") + "</td>";
						var _memoContent = "<td>" + __COMMON.utils.isNull(_obj.memoContent, "string") + "</td>";
                        var _memoWriter = "<td>" + __COMMON.utils.isNull(_obj.memoWriter, "string") + "</td>";
						_html.push("<tr>" + _memoSeq + _memoTitle + _memoContent + _memoWriter
                            +"</tr>");
					}
					jQuery("#tbody").html(_html.join(""));
                }else{
					// sample no data
                    alert("데이터가 존재하지 않습니다.");
                }
                bind.eventBind();


                }, false //동기/비동기
			, jQuery("#btn") );
        },
		
    }
}());

//--------------------------------------------------------------------------------------------------------------------------------------------------------
//프로세스
//--------------------------------------------------------------------------------------------------------------------------------------------------------
var process = (function() {
    return {
        //---------------------------------------------------------------------------------------------------------
        // sample 프로세스
        //---------------------------------------------------------------------------------------------------------
        defaultProcess : function(){
            // TODO
        }
    }
}());

//--------------------------------------------------------------------------------------------------------------------------------------------------------
//이벤트
//--------------------------------------------------------------------------------------------------------------------------------------------------------
var event = (function() {
    return {
        //---------------------------------------------------------------------------------------------------------
        // sample 클릭 추가 이벤트
        //---------------------------------------------------------------------------------------------------------
        clickAddName : function(){
            console.log("click evt");

            jQuery("#tbody td.memoTitle").off("click.add").on("click.add", function(e){
                console.log("click");
                var _param = new Object();
                _param.memoSeq = e.target.id;
                 __COMMON.ajax.ajaxLoad("/memo/detaildata", _param, function(p_data){
                     // detail page로 넘어가야하는데?
                     alert(p_data);
                 })
            });
        },

    }
}());

//--------------------------------------------------------------------------------------------------------------------------------------------------------
//시작함수 호출
//--------------------------------------------------------------------------------------------------------------------------------------------------------
jQuery(document).ready(function() {
    //시작 호출
    init();
});
